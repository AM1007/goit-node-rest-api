# Contacts Management REST API with PostgreSQL & Sequelize

[back](./README.md)

An upgraded version of the contacts management REST API now using PostgreSQL with Sequelize ORM for persistent data storage.

#Result

![screenshot](./assets/Screenshot%202025-04-06%20042428.png)

## Functionality

The API provides a complete set of CRUD operations for managing contacts:

- Get a list of all contacts
- Get a contact by identifier
- Add a new contact
- Update an existing contact
- Delete a contact
- Update contact favorite status

## Technology Stack

- **Node.js:** JavaScript runtime environment
- **Express.js:** Web application framework
- **PostgreSQL:** Reliable, open-source relational database
- **Sequelize:** Modern TypeScript and Node.js ORM for PostgreSQL
- **Joi:** Data validation
- **dotenv:** Environment variable management
- **morgan:** HTTP request logging
- **cors:** Cross-Origin Resource Sharing support

# Database Configuration

The application uses environment variables for database configuration:

```javascript
DATABASE_DIALECT = postgres;
DATABASE_USERNAME = your_username;
DATABASE_PASSWORD = your_password;
DATABASE_HOST = your_host;
DATABASE_NAME = your_database;
DATABASE_PORT = 5432;
```

## API Routes

### GET /api/contacts

Get all contacts.

- **Response:** Array of contacts
- **Status:** 200 OK

### GET /api/contacts/

Get a contact by identifier.

- **Response:** Contact object or error
- **Status:** 200 OK or 404 Not Found

### POST /api/contacts

Create a new contact.

- **Request Body:**

```json
{
  "name": "Contact Name",
  "email": "email@example.com",
  "phone": "(123) 456-7890",
  "favorite": false
}
```

- **Validation:**

  - Name is required
  - Email must match the format pattern and is required
  - Phone must be in format (xxx) xxx-xxxx and is required
  - Favorite is optional (defaults to false)

- **Response:** Created contact object or error message
- **Status:** 201 Created or 400 Bad Request

### PUT /api/contacts/

Update an existing contact.

- **Request Body:** { name?, email?, phone?, favorite? } (at least one field)
- **Response:** Updated contact object or error message
- **Status:** 200 OK, 400 Bad Request, or 404 Not Found

# DELETE /api/contacts/

Delete a contact.

- **Response:** Success message or error message
- **Status:** 200 OK or 404 Not Found

# PATCH /api/contacts//favorite

Update favorite status of a contact.

- **Request Body:** { favorite: boolean }
- **Response:** Updated contact object or error message
- **Status:** 200 OK, 400 Bad Request, or 404 Not Found

## Contact Model

```javascript
{
id: "integer", // Auto-generated by Sequelize
name: "string", // Required
email: "string", // Required, validated format
phone: "string", // Required, format (xxx) xxx-xxxx
favorite: "boolean", // Default: false
createdAt: "date", // Auto-generated by Sequelize
updatedAt: "date" // Auto-generated by Sequelize
}
```

# Error Handling

The API implements standardized error handling with appropriate HTTP status codes:

- 400: Bad Request (validation errors)
- 404: Not Found (contact not found)
- 500: Server Error (unexpected errors)

# Architecture

The application follows a clean architecture pattern:

- **Models:** Sequelize models defining the database schema
- **Controllers:** Handle HTTP requests and responses
- **Services:** Business logic layer
- **Routes:** Define API endpoints
- **Schemas:** Joi validation schemas
- **Middleware:** Request processing (validation, error handling)

# Database Migration

This version represents a migration from JSON file storage to PostgreSQL, providing:

- Data persistence
- Improved query capabilities
- Scalability for large datasets
- Transaction support
- Data integrity through validation
